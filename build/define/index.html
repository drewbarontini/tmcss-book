<!DOCTYPE html> <html lang=en> <head> <meta charset=utf-8> <meta content='IE=edge,chrome=1' http-equiv=X-UA-Compatible> <title>Define</title> <link href="../assets/stylesheets/application.css" rel=stylesheet /> </head> <body class='define define_index'> <header class='header row row--a'> <h1 class=header-title>Thinking Modular CSS</h1> </header> <aside class=sidebar> <nav class=nav> <a class=sidebar-link href="/">Summary</a> <a class=sidebar-link href="/intro/">Intro</a> <a class="sidebar-link is-active" href="/define/">Define</a> <a class=sidebar-link href="/process/">Process</a> <a class=sidebar-link href="/examples/">Examples</a> <a class=sidebar-link href="/outro/">Outro</a> </nav> </aside> <div class=row> <div class='cell cell--s well'> <main class=content> <h1>Define</h1> <p>Before we dig into the thinking behind modular CSS, it&rsquo;s important to define it, and talk about the tenets of modular CSS.</p> <p><strong>Note</strong>: I will use the words <code>module</code>, <code>pattern</code>, and <code>component</code> interchangeably; they all refer to a set of self-contained styles.</p> <h2>From Pages to Components</h2> <p>We&rsquo;ve made a shift from thinking of our styling in terms of pages to styling in terms of components (patterns, modules). Instead of looking at a page and defining it as its whole, we now need to look at all the various modules that make up the page.</p> <blockquote> <p>&ldquo;Focusing on creating healthy front-end modules instead of complete pages can help break complex page layouts into reusable solutions.&rdquo; &mdash; Dave Rupert</p> </blockquote> <p><strong>Example</strong></p> <p>This isn&rsquo;t the Home page, but rather a collection of various style patterns and modules that we use all over the site. We&rsquo;ll look at how we can do in a bit.</p> <blockquote> <p>&ldquo;Tiny Bootstraps, for Every Client&rdquo; &mdash; Dave Rupert</p> </blockquote> <h2>&ldquo;Modular CSS&rdquo; Definition</h2> <p>So what exactly do we mean by &ldquo;Modular CSS&rdquo;? Let&rsquo;s look at the definition:</p> <blockquote> <p>Modular design is an approach that subdivides a system into smaller parts that can be independently created and then used in different systems to drive multiple functionalities. &mdash; <a href="//en.wikipedia.org/wiki/Modular_design">Wikipedia</a></p> </blockquote> <p>I heard three important pieces in that definition:</p> <ol> <li>Smaller parts</li> <li>Independently created</li> <li>Used in different systems</li> </ol> <p>Your CSS should be:</p> <ul> <li>Broken down into smaller parts, smaller chunks of styles</li> <li>Independently created, so you&rsquo;re modules can be properly encapsulated (which we&rsquo;ll get more into in a bit)</li> <li>Have the ability to be ported from system to system with minor modifications, whether it&rsquo;s another site, or simply various containers within the site.</li> </ul> <h2>Single Responsibility Principle</h2> <p>Those concepts are present in the &ldquo;Single Responsibility Principle,&rdquo; which is something that I always try to adhere to.</p> <blockquote> <p>The single responsibility principle states that every class should have a single responsibility, and that responsibility should be entirely encapsulated by the class. All its services should be narrowly aligned with that responsibility. &mdash; <a href="//en.wikipedia.org/wiki/Single_responsibility_principle">Wikipedia</a></p> </blockquote> <h3>Single Responsibility</h3> <p>Firstly, our CSS modules should only have one responsibility. It&rsquo;s helpful, when creating your modules, to add a comment block at the top of the file that explains, in one sentence, what that module does; what is its responsibility.</p> <pre class="highlight sass"><span class="c1">// *************************************&#x000A;//&#x000A;//   Cell&#x000A;//   -&gt; Width-limiting blocks&#x000A;//&#x000A;// *************************************&#x000A;</span></pre> <p><em>This comment block is using Sass, but the same idea applies to vanilla CSS.</em> </p> <p>Now we know what our module is responsible for, so we can build it.</p> <pre class="highlight css"><span class="nc">.cell</span> <span class="p">{</span>&#x000A;  <span class="nl">margin</span><span class="p">:</span> <span class="m">0</span> <span class="nb">auto</span><span class="p">;</span>&#x000A;  <span class="nl">max-width</span><span class="p">:</span> <span class="m">900px</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>Here we have the <code>cell</code> module that handles the container for content. It makes sure that a section is centered and has its <code>max-width</code> set appropriately.</p> <h3>Encapsulation</h3> <p>Secondly, our CSS modules should be encapsulated; meaning, they shouldn&rsquo;t directly affect one another, or, they don&rsquo;t need to know about one another.</p> <pre class="highlight html"><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>&#x000A;  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"nav"</span><span class="nt">&gt;</span>&#x000A;    <span class="c">&lt;!--- ... ---&gt;</span>&#x000A;  <span class="nt">&lt;/nav&gt;</span>&#x000A;<span class="nt">&lt;/header&gt;</span></pre> <p>Let&rsquo;s say that we have a navigation (<code>nav</code>) in a <code>header</code>, and we want to float the <code>nav</code> to the right.</p> <pre class="highlight css"><span class="nc">.nav</span> <span class="p">{</span>&#x000A;  <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>What if we don&rsquo;t want every <code>.nav</code> to be floated to the right? What if we have a sub-navigation that is going to be on the left side?</p> <pre class="highlight css"><span class="nc">.header</span> <span class="nc">.nav</span> <span class="p">{</span>&#x000A;  <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>This works, but the problem here is that our <code>.header</code> module is telling our <code>.nav</code> module what to do. It&rsquo;s not adhering to the idea of encapsulation. Instead, we can let the <code>header</code> handle how its elements are positioned:</p> <pre class="highlight css"><span class="nc">.header-nav</span> <span class="p">{</span>&#x000A;  <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>Now, in our markup:</p> <pre class="highlight html"><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>&#x000A;  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"header-nav nav"</span><span class="nt">&gt;</span>&#x000A;    <span class="c">&lt;!--- ... ---&gt;</span>&#x000A;  <span class="nt">&lt;/nav&gt;</span>&#x000A;<span class="nt">&lt;/header&gt;</span></pre> <p>Our <code>nav</code> module now remains encapsulated, and the <code>header</code> handles how its elements are positioned without talking to another module.</p> <p>We can make this better by abstracting out a <code>float</code> utility class.</p> <pre class="highlight css"><span class="nc">.fr</span> <span class="p">{</span>&#x000A;  <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <ul> <li>Note about how scary this is</li> </ul> <pre class="highlight html"><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>&#x000A;  <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"nav fr"</span><span class="nt">&gt;</span>&#x000A;    <span class="c">&lt;!--- ... ---&gt;</span>&#x000A;  <span class="nt">&lt;/nav&gt;</span>&#x000A;<span class="nt">&lt;/header&gt;</span></pre> <p>Now we&rsquo;ve abstracted out the positioning of the <code>.nav</code>, so as to keep things encapsulated. </p> <p><em>Ultimately, you should have a <code>grid</code> module that handles the layout, but this illustrates the idea of encapsulation, and how you want to limit the responsibility and scope of your modules.</em></p> <p><strong>Positioning and layout are constant struggles with modular CSS. You&rsquo;ll have to abstract a lot of the layout styling to a more global component to keep your modules properly encapsulated.</strong></p> <h2>Classes</h2> <p>Now let&rsquo;s look at some more practical applications of &ldquo;Modular CSS.&rdquo;</p> <p>This one seems to be more commonplace these days, but it&rsquo;s still worth mentioning: <strong>It&rsquo;s best to stick with only using classes, avoiding IDs altogether</strong>. IDs are too specific, and they&rsquo;ll cause you unnecessary headaches. Classes, on the other hand, flatten the specificity of your elements to make sure your styles are applied properly without having to fuss with specificity issues.</p> <pre class="highlight html"><span class="nt">&lt;header</span> <span class="na">class=</span><span class="s">"header"</span><span class="nt">&gt;</span>&#x000A;  <span class="c">&lt;!--- ... ---&gt;</span>&#x000A;<span class="nt">&lt;/header&gt;</span></pre> <h2>Establish naming conventions</h2> <p>It doesn&rsquo;t matter as much what your naming conventions are, just that you have them. Decide with your team (or yourself) what those should be, and make sure to stick with the system, but be open to evolving it over time. </p> <p>Nick Walsh, a front-end developer at Envy Labs, had this great quote that we always reference when we talk about how we write our CSS, and how frequently we change it.</p> <blockquote> <p>This is how it is now, until we change it. &mdash; Nick Walsh</p> </blockquote> <p>It&rsquo;s very true. We constantly evaluate and evolve the system as we work on new projects, but that&rsquo;s what makes the system better: constant evaluation.</p> <p>At Code School (and Envy Labs), we use MVCSS, which is a Sass-based CSS architecture that I created with Nick. To give you a sample of some naming conventions, I&rsquo;ll talk about how we do things.</p> <p><em>This is by no way preaching our method. This is merely an example that can help guide you to establishing your own naming conventions.</em></p> <h3>camelCase &amp; Hyphens</h3> <ul> <li><code>.list</code></li> <li><code>.tabList</code></li> <li><code>.list-item</code></li> <li><code>.tabList-item</code></li> </ul> <p>We use camelCase for multiple words, and we use a hyphen to separate a module from a submodule.</p> <p><strong>Note</strong>: For filenames, use the same naming convention: (e.g. <code>_list.sass</code>, <code>.tabList.sass</code>)</p> <h3>Modifiers</h3> <blockquote> <p>A modifier is an alternate set of styling on a module.</p> </blockquote> <p>We use double-hyphens (<code>--</code>) to denote a modifier. </p> <p>Say, for example, we have these two buttons. The button on the left is our base button, and the button on the right is an alternate styling of the base button. For example:</p> <pre class="highlight css"><span class="nc">.btn</span> <span class="p">{</span>&#x000A;  <span class="nl">background</span><span class="p">:</span> <span class="no">blue</span><span class="p">;</span>&#x000A;  <span class="nl">color</span><span class="p">:</span> <span class="no">white</span><span class="p">;</span>&#x000A;  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span><span class="p">;</span>&#x000A;  <span class="nl">line-height</span><span class="p">:</span> <span class="m">2.5</span><span class="p">;</span>&#x000A;  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">1em</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>Our base button styles. And now, our modifier:</p> <pre class="highlight css"><span class="nc">.btn--b</span> <span class="p">{</span>&#x000A;  <span class="nl">background</span><span class="p">:</span> <span class="no">yellow</span><span class="p">;</span>&#x000A;  <span class="nl">color</span><span class="p">:</span> <span class="no">black</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>So now we have defined our button modifier, which is an alternate styling of the base <code>.btn</code>. Then, in our markup:</p> <pre class="highlight html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">class=</span><span class="s">"btn"</span><span class="nt">&gt;</span>Button<span class="nt">&lt;/a&gt;</span>&#x000A;<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#"</span> <span class="na">class=</span><span class="s">"btn btn--b"</span><span class="nt">&gt;</span>Button B<span class="nt">&lt;/a&gt;</span></pre> <p>We call our <code>.btn</code> class for the base button, and add both the base <code>.btn</code> class and the <code>.btn--b</code> modifier class on the modified button.</p> <h3>States</h3> <p>States are generally used for hooks that are added conditionally via JavaScript; things like, <code>is-active</code>, <code>is-hidden</code>, <code>is-editing</code>, etc.</p> <pre class="highlight css"><span class="nc">.dropdown</span> <span class="p">{</span>&#x000A;  <span class="nl">display</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>&#x000A; <span class="p">}</span>&#x000A;&#x000A;<span class="nc">.dropdown.is-active</span> <span class="p">{</span>&#x000A;  <span class="nl">display</span><span class="p">:</span> <span class="nb">block</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>So, for example, we have this <code>.dropdown</code> that is hidden by default, and is shown when the <code>.is-active</code> state class is added. Simple as that.</p> <h3>Context</h3> <p>This is a very important concept that applies to the Single Responsibility Principle’s &ldquo;encapsulation&rdquo; idea. Let&rsquo;s say that we have a <code>.dropdown</code> module, and when that <code>.dropdown</code> is inside of a parent container, it needs to have <code>position: relative</code> on that parent container to set the positioning context. Rather than adding <code>position: relative</code> to that parent container, thus breaking the &ldquo;Single Responsibility Principle,&rdquo; because our modules are no longer encapsulated (they are directly affecting one another), we can use a &ldquo;context&rdquo; class to handle this for us:</p> <pre class="highlight css"><span class="nc">.has-dropdown</span> <span class="p">{</span>&#x000A;  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>We define a context class using <code>.has-</code> as the prefix. Then, in our markup:</p> <pre class="highlight html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container has-dropdown"</span><span class="nt">&gt;</span>&#x000A;  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"dropdown"</span><span class="nt">&gt;</span>&#x000A;    <span class="c">&lt;!-- ... --&gt;</span>&#x000A;  <span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span></pre> <p>The <code>.container</code> doesn&rsquo;t need to know what&rsquo;s in it by altering its styles to accommodate the <code>.dropdown</code>. Instead, the <code>.dropdown</code> says, &ldquo;Hey! I&rsquo;m here, deal with it.&rdquo;</p> <p>That&rsquo;s a brief look at the naming conventions and structure that our team uses, and hopefully it&rsquo;s a useful example that you can work off of. We borrowed a lot of ideas from great methodologies created by insanely smart people. Things like:</p> <ul> <li>OOCSS</li> <li>BEM</li> <li>Suit</li> <li>SMACSS</li> </ul> <p>Make sure you look at all these methodologies, as one might fit your way of working the best. They are also great starting points to building your own system.</p> <h2>Limit nesting</h2> <p>This tenet applies specifically to CSS preprocessors, like Sass and LESS, that allow you to nest your selectors. This is important to talk about because of the popularity and widespread use of CSS preprocessors.</p> <p><em>We use and love Sass, but there are other great options out there to pick from.</em></p> <p>Although nesting is an attractive feature, and one touted by most &ldquo;Beginner&rsquo;s Guide to Sass&rdquo; tutorials out there, it&rsquo;s something you have to be very careful with.</p> <p>When I used Sass for the first time on a project, I nested <em>everything</em> inside of <code>section.content</code>. It was an absolute nightmare.</p> <pre class="highlight scss"><span class="nt">section</span><span class="nc">.content</span> <span class="p">{</span>&#x000A;  <span class="nc">.header</span> <span class="p">{</span>&#x000A;    <span class="c1">// ...&#x000A;</span>  <span class="p">}</span>&#x000A;  <span class="nc">.main</span> <span class="p">{</span>&#x000A;    <span class="c1">// ...&#x000A;</span>  <span class="p">}</span>&#x000A;  <span class="nc">.footer</span> <span class="p">{</span>&#x000A;    <span class="c1">// ...&#x000A;</span>  <span class="p">}</span>&#x000A;<span class="p">}</span></pre> <p>Now, we don&rsquo;t nest much, and when we do, it&rsquo;s not many levels deep.</p> <ul> <li>Example of proper Sass</li> </ul> <p>We generally only nest things like <code>:hover</code>, <code>:focus</code>, <code>::before</code>, <code>::after</code>, <code>:last-child</code>, etc.</p> <pre class="highlight sass"><span class="nc">.btn</span>&#x000A;  <span class="nl">background</span><span class="p">:</span> <span class="no">blue</span>&#x000A;  <span class="nl">color</span><span class="p">:</span> <span class="no">white</span>&#x000A;  <span class="nl">display</span><span class="p">:</span> <span class="n">inline-block</span>&#x000A;  <span class="nl">line-height</span><span class="p">:</span> <span class="m">2</span><span class="mi">.5</span>&#x000A;  <span class="nl">padding</span><span class="p">:</span> <span class="m">0</span> <span class="m">1em</span>&#x000A;  <span class="k">&amp;</span><span class="nd">:hover</span><span class="o">,</span>&#x000A;  <span class="k">&amp;</span><span class="nd">:focus</span>&#x000A;    <span class="nl">background</span><span class="p">:</span> <span class="no">green</span></pre> <h2>Avoid &ldquo;magic numbers&rdquo;</h2> <p>What am I talking about when I say &ldquo;magic numbers&rdquo;?</p> <pre class="highlight css"><span class="nc">.element</span> <span class="p">{</span>&#x000A;  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>&#x000A;  <span class="nl">top</span><span class="p">:</span> <span class="m">-2px</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>You know what this is. We all do it. These &ldquo;magic numbers&rdquo; are best to avoid whenever possible. You want your styles to predictable and flexible, and these &ldquo;magic numbers&rdquo; break that. However, when you do use them, which is sometimes unavoidable, make sure to document it.</p> <pre class="highlight css"><span class="nc">.element</span> <span class="p">{</span>&#x000A;  <span class="nl">position</span><span class="p">:</span> <span class="nb">relative</span><span class="p">;</span>&#x000A;  <span class="nl">top</span><span class="p">:</span> <span class="m">-2px</span><span class="p">;</span> <span class="c">/* FIXME: Magic number! */</span>&#x000A;<span class="p">}</span></pre> <p>Now I have a way to search across the project and find the magic numbers whenever I do a refactor.</p> <h2>Abstract layout and positioning</h2> <p>In addition to magic numbers, layout and positioning in CSS can cause you a lot of headaches when trying to keep your styles flexible. Let&rsquo;s look at an example.</p> <pre class="highlight css"><span class="nc">.nav</span> <span class="p">{</span>&#x000A;  <span class="nl">float</span><span class="p">:</span> <span class="nb">right</span><span class="p">;</span>&#x000A;  <span class="nl">width</span><span class="p">:</span> <span class="m">50</span><span class="err">%</span><span class="p">;</span>&#x000A;<span class="p">}</span></pre> <p>This is all well and good until we have a second <code>.nav</code> block that needs to be positioned to the left, or even centered. Ask yourself, why is this navigation block being positioned to the right at <code>50%</code>? Is it because it&rsquo;s in another module? Well, you&rsquo;ll want to use a higher-up layout module to handle this (e.g. a grid).</p> <pre class="highlight html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"grid"</span><span class="nt">&gt;</span>&#x000A;  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"grid-box grid-box--1of2"</span><span class="nt">&gt;</span>&#x000A;    <span class="c">&lt;!--- ... ---&gt;</span>&#x000A;  <span class="nt">&lt;/div&gt;</span>&#x000A;  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"grid-box grid-box--1of2"</span><span class="nt">&gt;</span>&#x000A;    <span class="nt">&lt;nav</span> <span class="na">class=</span><span class="s">"nav"</span><span class="nt">&gt;</span>&#x000A;      <span class="c">&lt;!--- ... ---&gt;</span>&#x000A;    <span class="nt">&lt;/nav&gt;</span>&#x000A;  <span class="nt">&lt;/div&gt;</span>&#x000A;<span class="nt">&lt;/div&gt;</span></pre> <p>This is an example of the grid we use, but the concept of a grid handling the structure is what&rsquo;s important here. The individual module doesn&rsquo;t need to control its layout; it should flex and fit in any container.</p> </main> </div> </div> <script src="../assets/javascripts/application.js"></script> </body> </html>